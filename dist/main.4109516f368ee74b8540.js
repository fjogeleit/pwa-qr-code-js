!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=function(e){if("string"!=typeof e)return!1;var t=e.match(n);if(!t)return!1;var a=t[1];if(!a)return!1;if(o.test(a)||i.test(a))return!0;return!1};var n=/^(?:\w+:)?\/\/(\S+)$/,o=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,i=/^[^\s\.]+\.\S{2,}$/},function(e,t){var n="BEGIN:VCARD",o="END:VCARD";var i=/[^\\];|^;/,a=/[^\\],|^,/;function r(e){return e.match(i)?s(e=e.replace(/\\,/g,","),";"):e.match(a)?s(e=e.replace(/\\;/g,";"),","):e.replace(/\\,/g,",").replace(/\\;/g,";")}function s(e,t){var n=new RegExp(t),o=new RegExp("\\\\"+t,"g");return e=(e=e.replace(o,"ΩΩΩ")).match(n)?(e=e.split(t)).map((function(e){return e.replace(/ΩΩΩ/g,t)})):e.replace(/ΩΩΩ/g,t)}var l=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),c=["nickname","related","categories","pid"],d=["fn"];e.exports={parse:function(e){for(var t,i,a,s,l,c={},d=e.split(/\r\n|\r|\n/),u=d.length,h=0;h<u;h++)if(""!==d[h]&&d[h].toUpperCase()!==n&&d[h].toUpperCase()!==o){var f=d[h],p=function(e){return e+1<u&&(" "===d[e+1][0]||"\t"===d[e+1][0])};if(p(h))for(;p(h);)f+=d[h+1].trim(),h++;if(i=(t=f.split(":")).shift(),a=t.join(":"),l=!1,s={},i.match(/;/)){var g=(i=i.replace(/\\;/g,"ΩΩΩ").replace(/\\,/,",")).split(";").map((function(e){return e.replace(/ΩΩΩ/g,";")}));i=g.shift(),g.forEach((function(e){var t=e.split("=");t[0]=t[0].toLowerCase(),0!==t[0].length&&(s[t[0]]?s[t[0]].push(t[1]):s[t[0]]=[t[1]])}))}if(a=r(a=a.replace(/\\n/g,"\n")),i.match(/\./)){var m=i.split(".");i=m[1],l=m[0]}var v={value:a};Object.keys(s).length&&(v.meta=s),l&&(v.namespace=l),0!==i.indexOf("X-")&&(i=i.toLowerCase()),void 0===c[i]?c[i]=[v]:c[i].push(v)}return c},generate:function(e,t){var i=[n],a="";t&&!e.version&&(e.version=[{value:"3.0"}]),t&&!e.uid&&(e.uid=[{value:l()}]);var r=function(e){return void 0===e?"":e.replace(/\n/g,"\\n").replace(/;/g,"\\;").replace(/,/g,"\\,")};return Object.keys(e).forEach((function(t){e[t]&&"function"==typeof e[t].forEach&&e[t].forEach((function(e){if(void 0!==e.value&&(""!==e.value||-1!==d.indexOf(t))){if(e.value instanceof Array){for(var n=!0,o=0;o<e.value.length;o++)if(void 0!==e.value[o]&&""!==e.value[o]){n=!1;break}if(n)return}if(a="",e.namespace&&(a+=e.namespace+"."),a+=0===t.indexOf("X-")?t:t.toUpperCase(),"object"==typeof e.meta&&Object.keys(e.meta).forEach((function(t){"function"==typeof e.meta[t].forEach&&e.meta[t].forEach((function(e){var n;t.length>0&&("TYPE"===t.toUpperCase()?a+=";"+r(t.toUpperCase())+"="+(void 0===(n=e)?"":n.replace(/\n/g,"\\n").replace(/;/g,"\\;")):a+=";"+r(t.toUpperCase())+"="+r(e))}))})),a+=":","string"==typeof e.value)a+=r(e.value);else{var s=-1!==c.indexOf(t)?",":";";a+=e.value.map((function(e){return r(e)})).join(s)}if(a.length>75){var l=a.substr(0,75),u=a.substr(75).match(/.{1,74}/g);i.push(l),u.forEach((function(e){i.push(" "+e)}))}else i.push(a)}}))})),i.push(o),i.join("\r\n")}}},function(e,t,n){var o=n(3);"string"==typeof o&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};n(5)(o,i);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,"dialog {\n  position: absolute;\n  left: 0; right: 0;\n  width: -moz-fit-content;\n  width: -webkit-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n  height: fit-content;\n  margin: auto;\n  border: solid;\n  padding: 1em;\n  background: white;\n  color: black;\n  display: block;\n}\n\ndialog:not([open]) {\n  display: none;\n}\n\ndialog + .backdrop {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n  background: rgba(0,0,0,0.1);\n}\n\n._dialog_overlay {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n}\n\ndialog.fixed {\n  position: fixed;\n  top: 50%;\n  transform: translate(0, -50%);\n}",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=(r=o,s=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),a=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot).concat(e," */")}));return[n].concat(a).concat([i]).join("\n")}var r,s,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var r=0;r<e.length;r++){var s=e[r];null!=s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),t.push(s))}},t}},function(e,t,n){"use strict";var o,i={},a=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function s(e,t){for(var n=[],o={},i=0;i<e.length;i++){var a=e[i],r=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};o[r]?o[r].parts.push(s):n.push(o[r]={id:r,parts:[s]})}return n}function l(e,t){for(var n=0;n<e.length;n++){var o=e[n],a=i[o.id],r=0;if(a){for(a.refs++;r<a.parts.length;r++)a.parts[r](o.parts[r]);for(;r<o.parts.length;r++)a.parts.push(m(o.parts[r],t))}else{for(var s=[];r<o.parts.length;r++)s.push(m(o.parts[r],t));i[o.id]={id:o.id,refs:1,parts:s}}}}function c(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var o=n.nc;o&&(e.attributes.nonce=o)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var i=r(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var a=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function f(e,t,n){var o=n.css,i=n.media,a=n.sourceMap;if(i&&e.setAttribute("media",i),a&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var p=null,g=0;function m(e,t){var n,o,i;if(t.singleton){var a=g++;n=p||(p=c(t)),o=h.bind(null,n,a,!1),i=h.bind(null,n,a,!0)}else n=c(t),o=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=s(e,t);return l(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var r=n[a],c=i[r.id];c&&(c.refs--,o.push(c))}e&&l(s(e,t),t);for(var d=0;d<o.length;d++){var u=o[d];if(0===u.refs){for(var h=0;h<u.parts.length;h++)u.parts[h]();delete i[u.id]}}}}},function(e,t,n){"use strict";n.r(t);n(2);var o=window.CustomEvent;function i(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function a(e){e&&e.blur&&e!==document.body&&e.blur()}function r(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function s(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function l(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,n=!1,o=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===e){var a="DOMNodeRemoved";n|=i.type.substr(0,a.length)===a,window.clearTimeout(t),t=window.setTimeout(o,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(t){e.addEventListener(t,i)}))}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}o&&"object"!=typeof o||((o=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),l.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),c.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map((function(e){return e+":not([disabled])"}));t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}a(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!c.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,c.needsCentering(this.dialog_)?(c.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new o("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var c={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],o=null;try{o=n.cssRules}catch(e){}if(o)for(var i=0;i<o.length;++i){var a=o[i],s=null;try{s=document.querySelectorAll(a.selectorText)}catch(e){}if(s&&r(s,e)){var l=a.style.getPropertyValue("top"),c=a.style.getPropertyValue("bottom");if(l&&"auto"!==l||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(e){return"absolute"===window.getComputedStyle(e).position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!c.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new l(e)},registerDialog:function(e){e.showModal||c.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(t){var n=[];t.forEach((function(e){for(var t,o=0;t=e.removedNodes[o];++o)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))})),n.length&&e(n)})))}};if(c.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},c.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},c.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var o=this.pendingDialogStack[0];o?(o.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},c.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=i(e);){for(var t,n=0;t=this.pendingDialogStack[n];++n)if(t.dialog===e)return 0===n;e=e.parentElement}return!1},c.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&document.activeElement!==document.documentElement&&(e.preventDefault(),e.stopPropagation(),a(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():e.target!==document.documentElement&&document.documentElement.focus()),!1}},c.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new o("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&n.dialog.dispatchEvent(t)&&n.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},c.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach((function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()}))},c.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},c.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},c.dm=new c.DialogManager,c.formSubmitter=null,c.useValue=null,void 0===window.HTMLDialogElement){var d=document.createElement("form");if(d.setAttribute("method","dialog"),"dialog"!==d.method){var u=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(u){var h=u.get;u.get=function(){return s(this)?"dialog":h.call(this)};var f=u.set;u.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):f.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",u)}}document.addEventListener("click",(function(e){if(c.formSubmitter=null,c.useValue=null,!e.defaultPrevented){var t=e.target;if(t&&s(t.form)){if(!("submit"===t.type&&["button","input"].indexOf(t.localName)>-1)){if("input"!==t.localName||"image"!==t.type)return;c.useValue=e.offsetX+","+e.offsetY}i(t)&&(c.formSubmitter=t)}}}),!1);var p=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!s(this))return p.call(this);var e=i(this);e&&e.close()},document.addEventListener("submit",(function(e){var t=e.target;if(s(t)){e.preventDefault();var n=i(t);if(n){var o=c.formSubmitter;o&&o.form===t?n.close(c.useValue||o.value):n.close(),c.formSubmitter=null}}}),!0)}var g=c;class m{static hasCamera(){return navigator.mediaDevices.enumerateDevices().then(e=>e.some(e=>"videoinput"===e.kind)).catch(()=>!1)}constructor(e,t,n=m.DEFAULT_CANVAS_SIZE){this.$video=e,this.$canvas=document.createElement("canvas"),this._onDecode=t,this._paused=this._active=!1,this.$canvas.width=n,this.$canvas.height=n,this._sourceRect={x:0,y:0,width:n,height:n},this._onCanPlay=this._onCanPlay.bind(this),this._onPlay=this._onPlay.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this.$video.addEventListener("canplay",this._onCanPlay),this.$video.addEventListener("play",this._onPlay),document.addEventListener("visibilitychange",this._onVisibilityChange),this._qrWorker=new Worker(m.WORKER_PATH)}destroy(){this.$video.removeEventListener("canplay",this._onCanPlay),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),this.stop(),this._qrWorker.postMessage({type:"close"})}start(){if(this._active&&!this._paused)return Promise.resolve();if("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,this._paused=!1,document.hidden)return Promise.resolve();if(clearTimeout(this._offTimeout),this._offTimeout=null,this.$video.srcObject)return this.$video.play(),Promise.resolve();let e="environment";return this._getCameraStream("environment",!0).catch(()=>(e="user",this._getCameraStream())).then(t=>{this.$video.srcObject=t,this._setVideoMirror(e)}).catch(e=>{throw this._active=!1,e})}stop(){this.pause(),this._active=!1}pause(){this._paused=!0,this._active&&(this.$video.pause(),this._offTimeout||(this._offTimeout=setTimeout(()=>{let e=this.$video.srcObject&&this.$video.srcObject.getTracks()[0];e&&(e.stop(),this._offTimeout=this.$video.srcObject=null)},300)))}static scanImage(e,t=null,n=null,o=null,i=!1,a=!1){let r=!1,s=new Promise((a,s)=>{let l,c,d;n||(n=new Worker(m.WORKER_PATH),r=!0,n.postMessage({type:"inversionMode",data:"both"})),c=e=>{"qrResult"===e.data.type&&(n.removeEventListener("message",c),n.removeEventListener("error",d),clearTimeout(l),null!==e.data.data?a(e.data.data):s("QR code not found."))},d=e=>{n.removeEventListener("message",c),n.removeEventListener("error",d),clearTimeout(l),s("Scanner error: "+(e?e.message||e:"Unknown Error"))},n.addEventListener("message",c),n.addEventListener("error",d),l=setTimeout(()=>d("timeout"),3e3),m._loadImage(e).then(e=>{e=m._getImageData(e,t,o,i),n.postMessage({type:"decode",data:e},[e.data.buffer])}).catch(d)});return t&&a&&(s=s.catch(()=>m.scanImage(e,null,n,o,i))),s.finally(()=>{r&&n.postMessage({type:"close"})})}setGrayscaleWeights(e,t,n,o=!0){this._qrWorker.postMessage({type:"grayscaleWeights",data:{red:e,green:t,blue:n,useIntegerApproximation:o}})}setInversionMode(e){this._qrWorker.postMessage({type:"inversionMode",data:e})}_onCanPlay(){this._updateSourceRect(),this.$video.play()}_onPlay(){this._updateSourceRect(),this._scanFrame()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_updateSourceRect(){let e=Math.round(2/3*Math.min(this.$video.videoWidth,this.$video.videoHeight));this._sourceRect.width=this._sourceRect.height=e,this._sourceRect.x=(this.$video.videoWidth-e)/2,this._sourceRect.y=(this.$video.videoHeight-e)/2}_scanFrame(){if(!this._active||this.$video.paused||this.$video.ended)return!1;requestAnimationFrame(()=>{m.scanImage(this.$video,this._sourceRect,this._qrWorker,this.$canvas,!0).then(this._onDecode,e=>{this._active&&"QR code not found."!==e&&console.error(e)}).then(()=>this._scanFrame())})}_getCameraStream(e,t=!1){let n=[{width:{min:1024}},{width:{min:768}},{}];return e&&(t&&(e={exact:e}),n.forEach(t=>t.facingMode=e)),this._getMatchingCameraStream(n)}_getMatchingCameraStream(e){return 0===e.length?Promise.reject("Camera not found."):navigator.mediaDevices.getUserMedia({video:e.shift()}).catch(()=>this._getMatchingCameraStream(e))}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}static _getImageData(e,t=null,n=null,o=!1){n=n||document.createElement("canvas");let i=t&&t.x?t.x:0,a=t&&t.y?t.y:0,r=t&&t.width?t.width:e.width||e.videoWidth;return t=t&&t.height?t.height:e.height||e.videoHeight,o||n.width===r&&n.height===t||(n.width=r,n.height=t),(o=n.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,o.drawImage(e,i,a,r,t,0,0,n.width,n.height),o.getImageData(0,0,n.width,n.height)}static _loadImage(e){if(e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||window.ImageBitmap&&e instanceof window.ImageBitmap||window.OffscreenCanvas&&e instanceof window.OffscreenCanvas)return Promise.resolve(e);if(e instanceof Image)return m._awaitImageLoad(e).then(()=>e);if(e instanceof File||e instanceof URL||"string"==typeof e){let t=new Image;return t.src=e instanceof File?URL.createObjectURL(e):e,m._awaitImageLoad(t).then(()=>(e instanceof File&&URL.revokeObjectURL(t.src),t))}return Promise.reject("Unsupported image type.")}static _awaitImageLoad(e){return new Promise((t,n)=>{if(e.complete&&0!==e.naturalWidth)t();else{let o,i;o=()=>{e.removeEventListener("load",o),e.removeEventListener("error",i),t()},i=()=>{e.removeEventListener("load",o),e.removeEventListener("error",i),n("Image load error")},e.addEventListener("load",o),e.addEventListener("error",i)}})}}m.DEFAULT_CANVAS_SIZE=400,m.WORKER_PATH="qr-scanner-worker.min.js";var v=m,b=n(0),y=n.n(b),_=n(1),w=n.n(_);"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js")})),v.WORKER_PATH="./worker/qr-scanner-worker.min.js";var E,M=document.querySelector("#player"),k=document.querySelector("#result-dialog"),S=document.querySelector("#next-button"),C=document.querySelector("#qr-text"),x=document.querySelector("#share-button");x.disabled=!0,x.addEventListener("click",(function(){"share"in navigator&&navigator.share({title:"Scan Result",text:E,url:window.location.toString()}).catch((function(e){console.warn(e)}))})),k.showModal||g.registerDialog(k),S.addEventListener("click",(function(){for(k.close(),T.start();C.firstChild;)C.removeChild(C.firstChild)}));var D=function(e){if(E=e,y()(e)){var t=document.createElement("a");return t.appendChild(document.createTextNode(E)),t.target="_blank",t.title=E,t.href=E,C.appendChild(t),void window.open(E,"_blank")}if(e.startsWith("BEGIN:VCARD")){var n=new Blob([E],{type:"text/vcard"}),o=URL.createObjectURL(n),i=w.a.parse(E),a=document.createElement("p"),r=document.createElement("a"),s=i.fn.map((function(e){return e.value})).join(", ");a.appendChild(document.createTextNode("Kontakt herunterladen:")),r.appendChild(document.createTextNode(s)),r.target="_blank",r.title=s,r.href=o,r.download="contacts.vcf",C.appendChild(a),C.appendChild(r)}else C.innerHTML=E.replace(/\n/g,"<br />");x.disabled=!1,T.stop(),k.showModal()},T=new v(M,D);T.start(),navigator.serviceWorker.onmessage=function(e){var t=e.data.file;v.scanImage(t).then(D).catch((function(){T.stop(),C.innerHTML="No QR Code found",x.disabled=!0,k.showModal()}))}}]);